# JomEvent! 活动预订系统 - 功能清单

## 📋 系统概述
JomEvent! 是一个基于 React + TypeScript + Supabase 的现代化活动预订平台，支持参与者浏览预订活动和组织者管理活动。

---

## ✅ 已完成功能

### 🔐 用户认证系统
- [x] **统一登录/注册页面** (`UnifiedLogin.tsx`)
  - 支持参与者(Attendee)和组织者(Organizer)两种角色注册
  - 邮箱和密码登录
  - 邮箱验证功能（注册后发送验证邮件）
  - Demo模式（快速体验，无需注册）
  - 表单验证和错误提示

- [x] **邮箱验证** (`EmailVerification.tsx`)
  - 验证链接处理
  - 验证状态显示（验证中/成功/失败）
  - 自动重定向到登录页面

- [x] **组织者路由保护** (`OrganizerRoute.tsx`)
  - 权限验证
  - 自动重定向未授权用户

- [x] **登出功能**
  - 登出确认对话框
  - 登出成功提示
  - 清理本地和远程会话

---

### 👤 参与者(Attendee)功能

#### 活动浏览
- [x] **活动列表** (`EventList.tsx`)
  - 活动卡片展示
  - 响应式布局
  - 活动详情显示（标题、日期、时间、地点、价格、类别）

- [x] **活动搜索和过滤** (`EventSearch.tsx`)
  - 关键词搜索
  - 按类别过滤
  - 按地点过滤
  - 按日期范围过滤
  - 按价格范围过滤

- [x] **活动卡片** (`EventCard.tsx`)
  - 活动信息展示
  - "Book Now" 按钮
  - "Add to Cart" 按钮
  - 支持多次预订同一活动

#### 活动预订
- [x] **直接预订** (`BookingModal.tsx`)
  - 预订模态框
  - 个人信息填写（姓名、邮箱、电话）
  - 价格显示
  - 预订确认

- [x] **购物车功能** (`ShoppingCart.tsx`)
  - 右侧滑出式购物车侧边栏
  - 添加/移除商品
  - 数量调整
  - 购物车商品列表
  - 优惠券/促销码应用
  - 价格计算（小计、折扣、总计）
  - 动画效果

- [x] **结账页面** (`CheckoutPage.tsx`)
  - 订单详情展示
  - 个人信息表单（姓名、邮箱、电话）
  - 优惠券输入和应用
  - 订单摘要（小计、折扣、总计）
  - PayPal支付集成（显示PayPal图标）
  - 支持RM0免费活动支付
  - 支付成功后显示QR码

#### 用户中心
- [x] **用户仪表板** (`AccountDashboard.tsx`)
  - 用户信息展示
  - 我的预订列表

- [x] **我的预订** (`UserBookings.tsx`)
  - 预订列表展示
  - 预订状态管理（going/maybe/not_going）
  - QR码显示
  - 预订详情
  - 预订取消功能

- [x] **QR码生成** (`QRCode.tsx`)
  - 预订QR码生成
  - 签到信息包含（bookingId, eventId, userId）
  - QR码下载功能

#### 通知系统
- [x] **通知中心** (`NotificationCenter.tsx`)
  - 实时通知显示
  - 通知类型：活动更新、提醒、公告、预订确认
  - 通知徽章计数
  - 通知列表和管理

---

### 🎯 组织者(Organizer)功能

#### 仪表板总览
- [x] **组织者仪表板** (`OrganizerDashboard.tsx`)
  - 统计卡片（总活动数、总预订数、即将到来的活动、总收入）
  - 标签页导航（Overview, Events, Bookings, Analytics, Promotions）
  - 实时数据更新

#### 活动管理
- [x] **活动创建/编辑** (`EventForm.tsx`)
  - 活动表单（标题、描述、日期、时间、地点、容量、价格、类别）
  - 活动图片上传
  - 表单验证
  - 创建/更新功能

- [x] **活动列表管理**
  - 活动搜索
  - 活动过滤（全部/进行中/已完成/草稿）
  - 活动编辑
  - 活动删除
  - 活动统计（预订数、收入）

#### 预订管理
- [x] **参与者管理** (`AttendeeManagement.tsx`)
  - 参与者列表
  - 预订状态管理
  - 批量操作
  - 签到功能
  - 预订状态筛选
  - 参与者信息显示

#### 数据分析
- [x] **销售和收入图表** (`SalesRevenueCharts.tsx`)
  - 票务销售趋势图（折线图）
  - 收入趋势图（柱状图）
  - 各活动票务销售（柱状图）
  - 各活动收入分布（饼图）
  - 使用 ECharts.js 可视化

- [x] **预订分析** (`BookingAnalytics.tsx`)
  - 预订趋势图
  - 收入分析
  - 预订状态分布
  - 各活动预订数
  - 预订率分析

- [x] **活动分析** (`EventAnalytics.tsx`)
  - 活动预订统计
  - 签到率分析
  - 容量使用率

- [x] **收入追踪** (`RevenueTracking.tsx`)
  - 收入统计和可视化

- [x] **人口统计分析** (`DemographicsAnalytics.tsx`)
  - 参与者数据分析

#### 营销推广
- [x] **优惠券/促销码管理** (`PromoCodeManager.tsx`)
  - 创建优惠券
  - 编辑优惠券
  - 激活/停用优惠券
  - 优惠券列表展示
  - **状态过滤**（全部/激活/过期/未激活）
  - **折扣类型过滤**（全部/百分比/固定金额）
  - **使用情况过滤**（全部/可用/已用完）
  - **分页功能**（每页25个）
  - 日期格式：DD/MM/YY
  - 过期状态自动检测和显示
  - 过期优惠券禁用编辑/停用操作
  - 日期验证（防止创建过期优惠券）
  - 使用统计显示

#### 通信
- [x] **通信中心** (`CommunicationCenter.tsx`)
  - 发送通知给参与者
  - 批量通信
  - 按预订状态筛选接收者

---

### 🎨 页面和UI组件

- [x] **首页**
  - Hero横幅 (`HeroBanner.tsx`)
  - 活动列表
  - 推荐评价 (`Testimonials.tsx`)
  - 联系表单 (`ContactSection.tsx`)

- [x] **关于页面** (`About.tsx`)
  - 公司介绍
  - 服务说明

- [x] **页脚** (`Footer.tsx`)
  - 链接导航
  - 版权信息

- [x] **导航栏**
  - Logo和品牌
  - 导航链接
  - 购物车图标（带数量徽章）
  - 用户信息
  - 登出按钮
  - Demo模式标识

---

### 💳 支付系统

- [x] **PayPal集成**
  - PayPal图标显示
  - 支付按钮
  - 支付流程（模拟）
  - 支付成功处理

---

### 🎫 优惠券/促销系统

- [x] **优惠券功能**
  - 百分比折扣
  - 固定金额折扣
  - 最小购买金额限制
  - 最大折扣金额限制
  - 使用次数限制
  - 有效期管理
  - 活动特定优惠券
  - 通用优惠券
  - 优惠券验证
  - 使用统计

---

### 📱 响应式设计

- [x] **移动端适配**
  - 响应式布局
  - 移动端导航
  - 触摸友好的UI元素
  - 自适应表格

- [x] **统一宽度**
  - 所有页面内容宽度：`max-w-7xl` (1200px)
  - 与header对齐
  - 响应式padding

---

### 🔧 技术特性

- [x] **Supabase集成**
  - 用户认证
  - 数据库操作
  - 实时订阅
  - 存储服务（图片上传）

- [x] **Mock模式**
  - 离线模式支持
  - 本地存储模拟数据
  - Demo模式标识

- [x] **状态管理**
  - React Hooks
  - 本地状态管理
  - 购物车状态

- [x] **路由**
  - React Router DOM
  - 路由保护
  - 导航守卫

---

## 🚧 部分完成/待完善功能

### 支付系统
- [ ] **PayPal真实集成**
  - 当前为模拟支付流程
  - 需要集成PayPal SDK
  - 需要支付回调处理
  - 需要支付状态更新

### 签到系统
- [ ] **QR码扫描签到**
  - CheckIn组件已创建但未使用
  - 需要实现扫描功能
  - 需要签到验证逻辑

---

## 📊 数据模型

### 核心实体
- **User** - 用户
- **Event** - 活动
- **Booking** - 预订
  - 包含参与者信息（attendee_name, attendee_email, attendee_phone）
  - 支持优惠券和折扣
  - 状态：confirmed, pending, cancelled, checked_in
- **PromoCode** - 优惠券
  - 支持百分比和固定金额折扣
  - 有效期管理
  - 使用限制

---

## 🎯 功能特性总结

### 参与者功能
✅ 活动浏览和搜索  
✅ 活动预订（直接预订/购物车）  
✅ 购物车管理  
✅ 结账和支付  
✅ 我的预订管理  
✅ QR码生成和显示  
✅ 通知接收  

### 组织者功能
✅ 活动创建和管理  
✅ 参与者管理  
✅ 预订管理  
✅ 数据分析（销售、收入、预订趋势）  
✅ 优惠券管理（创建、编辑、过滤、分页）  
✅ 通信中心  
✅ 实时数据统计  

### 系统功能
✅ 用户认证（注册、登录、邮箱验证）  
✅ 角色权限管理  
✅ Mock模式支持  
✅ 响应式设计  
✅ 统一UI风格  

---

## 📝 备注

- 所有页面内容宽度已统一为 `max-w-7xl` (1200px)
- 日期格式：DD/MM/YY
- 优惠券不可删除（已移除删除功能）
- 支持多次预订同一活动
- 支持免费活动（RM0）支付流程
- PayPal支付目前为模拟实现

